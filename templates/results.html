{% extends "results_layout.html" %}

{% block body %}
    <form class="results_settings" action="/save-settings" method="post">
      <input type="hidden" name="past" value="{{ current_url }}"></input>
      <select class="results-settings" name="safe" id="safeSearchSelect">
          <option value="active" {% if settings.safe == 'active' %}selected{% endif %}>{{ lang_data.settings.safe_search }} {{ lang_data.settings.on }}</option>
          <option value="" {% if settings.safe == '' %}selected{% endif %}>{{ lang_data.settings.safe_search }} {{ lang_data.settings.off }}</option>
      </select>
      <select class="results-settings" name="lang" id="languageSelect">
          <option value="" {% if settings.lang == '' %}selected{% endif %}>{{ lang_data.settings.any_language }}</option>
          <option value="lang_en" {% if settings.lang == 'lang_en' %}selected{% endif %}>English</option>
          <option value="lang_af" {% if settings.lang == 'lang_af' %}selected{% endif %}>Afrikaans</option>
          <option value="lang_ar" {% if settings.lang == 'lang_ar' %}selected{% endif %}>العربية (Arabic)</option>
          <option value="lang_hy" {% if settings.lang == 'lang_hy' %}selected{% endif %}>Հայերեն (Armenian)</option>
          <option value="lang_be" {% if settings.lang == 'lang_be' %}selected{% endif %}>Беларуская (Belarusian)</option>
          <option value="lang_bg" {% if settings.lang == 'lang_bg' %}selected{% endif %}>български (Bulgarian)</option>
          <option value="lang_ca" {% if settings.lang == 'lang_ca' %}selected{% endif %}>Català (Catalan)</option>
          <option value="lang_zh-CN" {% if settings.lang == 'lang_zh-CN' %}selected{% endif %}>中文 (简体) (Chinese Simplified)</option>
          <option value="lang_zh-TW" {% if settings.lang == 'lang_zh-TW' %}selected{% endif %}>中文 (繁體) (Chinese Traditional)</option>
          <option value="lang_hr" {% if settings.lang == 'lang_hr' %}selected{% endif %}>Hrvatski (Croatian)</option>
          <option value="lang_cs" {% if settings.lang == 'lang_cs' %}selected{% endif %}>Čeština (Czech)</option>
          <option value="lang_da" {% if settings.lang == 'lang_da' %}selected{% endif %}>Dansk (Danish)</option>
          <option value="lang_nl" {% if settings.lang == 'lang_nl' %}selected{% endif %}>Nederlands (Dutch)</option>
          <option value="lang_eo" {% if settings.lang == 'lang_eo' %}selected{% endif %}>Esperanto</option>
          <option value="lang_et" {% if settings.lang == 'lang_et' %}selected{% endif %}>Eesti (Estonian)</option>
          <option value="lang_tl" {% if settings.lang == 'lang_tl' %}selected{% endif %}>Filipino (Tagalog)</option>
          <option value="lang_fi" {% if settings.lang == 'lang_fi' %}selected{% endif %}>Suomi (Finnish)</option>
          <option value="lang_fr" {% if settings.lang == 'lang_fr' %}selected{% endif %}>Français (French)</option>
          <option value="lang_de" {% if settings.lang == 'lang_de' %}selected{% endif %}>Deutsch (German)</option>
          <option value="lang_el" {% if settings.lang == 'lang_el' %}selected{% endif %}>Ελληνικά (Greek)</option>
          <option value="lang_iw" {% if settings.lang == 'lang_iw' %}selected{% endif %}>עברית (Hebrew)</option>
          <option value="lang_hi" {% if settings.lang == 'lang_hi' %}selected{% endif %}>हिन्दी (Hindi)</option>
          <option value="lang_hu" {% if settings.lang == 'lang_hu' %}selected{% endif %}>magyar (Hungarian)</option>
          <option value="lang_is" {% if settings.lang == 'lang_is' %}selected{% endif %}>íslenska (Icelandic)</option>
          <option value="lang_id" {% if settings.lang == 'lang_id' %}selected{% endif %}>Bahasa Indonesia (Indonesian)</option>
          <option value="lang_it" {% if settings.lang == 'lang_it' %}selected{% endif %}>italiano (Italian)</option>
          <option value="lang_ja" {% if settings.lang == 'lang_ja' %}selected{% endif %}>日本語 (Japanese)</option>
          <option value="lang_ko" {% if settings.lang == 'lang_ko' %}selected{% endif %}>한국어 (Korean)</option>
          <option value="lang_lv" {% if settings.lang == 'lang_lv' %}selected{% endif %}>latviešu (Latvian)</option>
          <option value="lang_lt" {% if settings.lang == 'lang_lt' %}selected{% endif %}>lietuvių (Lithuanian)</option>
          <option value="lang_no" {% if settings.lang == 'lang_no' %}selected{% endif %}>norsk (Norwegian)</option>
          <option value="lang_fa" {% if settings.lang == 'lang_fa' %}selected{% endif %}>فارسی (Persian)</option>
          <option value="lang_pl" {% if settings.lang == 'lang_pl' %}selected{% endif %}>polski (Polish)</option>
          <option value="lang_pt" {% if settings.lang == 'lang_pt' %}selected{% endif %}>português (Portuguese)</option>
          <option value="lang_ro" {% if settings.lang == 'lang_ro' %}selected{% endif %}>română (Romanian)</option>
          <option value="lang_ru" {% if settings.lang == 'lang_ru' %}selected{% endif %}>русский (Russian)</option>
          <option value="lang_sr" {% if settings.lang == 'lang_sr' %}selected{% endif %}>српски (Serbian)</option>
          <option value="lang_sk" {% if settings.lang == 'lang_sk' %}selected{% endif %}>slovenčina (Slovak)</option>
          <option value="lang_sl" {% if settings.lang == 'lang_sl' %}selected{% endif %}>slovenščina (Slovenian)</option>
          <option value="lang_es" {% if settings.lang == 'lang_es' %}selected{% endif %}>español (Spanish)</option>
          <option value="lang_sw" {% if settings.lang == 'lang_sw' %}selected{% endif %}>Kiswahili (Swahili)</option>
          <option value="lang_sv" {% if settings.lang == 'lang_sv' %}selected{% endif %}>svenska (Swedish)</option>
          <option value="lang_th" {% if settings.lang == 'lang_th' %}selected{% endif %}>ไทย (Thai)</option>
          <option value="lang_tr" {% if settings.lang == 'lang_tr' %}selected{% endif %}>Türkçe (Turkish)</option>
          <option value="lang_uk" {% if settings.lang == 'lang_uk' %}selected{% endif %}>українська (Ukrainian)</option>
          <option value="lang_vi" {% if settings.lang == 'lang_vi' %}selected{% endif %}>Tiếng Việt (Vietnamese)</option>
      </select>
      <button class="results-save" type="submit">Apply settings</button>
    </form>
    <p class="engine">Engine: {{ engine }}</p>
    <p class="fetched">{{ lang_data.results.results }} {{ fetched }} {{ lang_data.results.seconds }}</p>
    {% if check %}
        <div class="check"><p>Did you mean: <a href="/search?q={{ check }}&t={{ type }}"><h3>{{ check }}</h3></a></p></div>
    {% endif %}
    {% if user_info == "" %}
    {% else %}
        <p id="info_font" class="snip">{{ user_info }}</p>
    {% endif %}
    {% if calc == "" %}
    {% else %}
    {% if settings.javascript == "enabled" %}
        <div class="calc">
            <div class="calc-input" id="calc-input">
              <div class="prev_calculation">
                {{ exported_math_expression }}
              </div>
              <div id="current_calc">{{ calc }}</div>
            </div>
        <div class="calc-btns">
            <button class="btn-nostyle"><div class="calc-btn calc-btn-style clickable">(</div></button>
            <button class="btn-nostyle"><div class="calc-btn calc-btn-style clickable">)</div></button>
            <button class="btn-nostyle"><div class="calc-btn calc-btn-style clickable" id="ce">CE</div></button>
            <button class="btn-nostyle"><div class="calc-btn calc-btn-3 calc-btn-style material-icons-round icon_visibility clickable" id="backspace">backspace</div></button>

            <button class="btn-nostyle"><div class="calc-btn calc-btn-style clickable">7</div></button>
            <button class="btn-nostyle"><div class="calc-btn calc-btn-style clickable">8</div></button>
            <button class="btn-nostyle"><div class="calc-btn calc-btn-style clickable">9</div></button>
            <button class="btn-nostyle" id="divide"><div class="calc-btn clickable">÷</div></button>

            <button class="btn-nostyle"><div class="calc-btn calc-btn-style clickable">4</div></button>
            <button class="btn-nostyle"><div class="calc-btn calc-btn-style clickable">5</div></button>
            <button class="btn-nostyle"><div class="calc-btn calc-btn-style clickable">6</div></button>
            <button class="btn-nostyle" id="multiply"><div class="calc-btn clickable">×</div></button>

            <button class="btn-nostyle"><div class="calc-btn calc-btn-style clickable">1</div></button>
            <button class="btn-nostyle"><div class="calc-btn calc-btn-style clickable">2</div></button>
            <button class="btn-nostyle"><div class="calc-btn calc-btn-style clickable">3</div></button>
            <button class="btn-nostyle" id="subtract"><div class="calc-btn clickable">-</div></button>

            <button class="btn-nostyle"><div class="calc-btn calc-btn-style clickable">0</div></button>
            <button class="btn-nostyle"><div class="calc-btn calc-btn-style clickable">.</div></button>
            <button class="btn-nostyle" id="equals"><div class="calc-btn-2 clickable">=</div></button>
            <button class="btn-nostyle" id="add"><div class="calc-btn clickable">+</div></button>
        </div>
        </div>
        {% else %}
        <p id="info_font" class="snip">{{ calc }}</p>
        {% endif %}
    {% endif %}
    {% if wiki != None %}
    <div class="snip">
        <h1 class="snip_title">{{ wiki.title }}</h1>
        {% if settings.javascript == "enabled" %}
        <img class="kno_wiki" src=""/>
        {% endif %}
        {% if wiki.known_for %}
        <h4 class="wiki_known_for">{{ wiki.known_for }}</h4>
        {% endif %}
        {% if wiki.image != None %}
        <img src="{{ wiki.image }}"/>
        {% endif %}
        {{ wiki.desc }}
        <a target="_blank" class="wiki_link" href="{{ wiki.link }}">Wikipedia</a>

        {% if wiki.info|length > 0 %}
          <h4 class="about">About</h4>
          <table class="wiki_info">
            {% for info_point in wiki.info %}
              <tr class="info">
                <th class="factpoint">{{ info_point }}</th>
                <td class="fact">{{ wiki.info[info_point]|safe }}</td>
              </tr>
            {% endfor %}
          </table>
        {% endif %}
    </div>
    {% endif %}
    {% if snip != "" %}
        <p class="snipp">{{ snip|highlight_query_words(q) }} <a target="_blank" href="{{ results[0].url }}">{{ results[0].url }}</a></p>
    {% endif %}
    {% if results %}
    <div class="result_sublink">
      <a id="link" {% if settings.new_tab == "active" %} target="_blank" {% endif %} href="{{ results[0].url }}">{{ results[0].url }}</a>
        <a {% if settings.new_tab == "active"  %} target="_blank" {% endif %} href="{{ results[0].url }}"><h3>{{ results[0].title }}</h3></a>
        <p>{{ results[0].desc|highlight_query_words(q) }}</p>
        {% if engine == "qwant" %}
          {% if results[0].sublinks|length != 0 %}
            {% for sublink in results[0].sublinks %}
              <div class="sublinks">
                <a href="{{ sublink.url }}" {% if settings.new_tab == "active"  %} target="_blank" {% endif %}><h3>{{ sublink.title }}</h3></a>
                <p class="qwant_sublink">{{ sublink.desc }}</p>
              </div>
            {% endfor %}
          {% endif %}
        {% endif %}
    </div>
    {% endif %}
    {% if sublink %}
    <div class="results">
      {% for result in sublink %}
      <div class="sublinks">
          <a href="{{ result.url }}" {% if settings.new_tab == "active"  %} target="_blank" {% endif %}><h3>{{ result.title }}</h3></a>
          <p>{{ result.desc }}</p>
      </div>
      {% endfor %}
    </div>
    {% endif %}
    {% if results %}
    <div class="clean">
        {% for result in results[1:] %}
        <div class="results">
            <a id="link" href="{{ result.url }}" {% if settings.new_tab == "active"  %} target="_blank" {% endif %}>{{ result.url }}</a>
            <a href="{{ result.url }}" {% if settings.new_tab == "active"  %} target="_blank" {% endif %}><h3>{{ result.title }}</h3></a>
            <p>{{ result.desc|highlight_query_words(q) }}</p>
            {% if engine == "qwant" %}
              {% if result.sublinks|length != 0 %}
                {% for sublink in result.sublinks %}
                  <div class="sublinks">
                    <a href="{{ sublink.url }}" {% if settings.new_tab == "active"  %} target="_blank" {% endif %}><h3>{{ sublink.title }}</h3></a>
                    <p class="qwant_sublink">{{ sublink.desc }}</p>
                  </div>
                {% endfor %}
              {% endif %}
            {% endif %}
        </div>
        {% endfor %}
    </div>
    <div class="prev-next">
        <form method="{{ settings.method }}">
          <input type="hidden" name="q" value="{{ q }}">
          <input type="hidden" name="t" value="{{ type }}">
          {% set p = request.args.get('p', 0)|int %}
          {% if p >= 10 %}
              <button name="p" value="{{ p - 10 }}">{{ lang_data.buttons.previous }}</button>
          {% endif %}
          <button name="p" value="{{ p + 10 }}">{{ lang_data.buttons.next }}</button>
        </form>
    </div>
    {% else %}
        <div class="no-results-found">
            Your search '{{ q }}' came back with no results.<br>
            Try rephrasing your search term and/or recorrect any spelling mistakes.
        </div>
    {% endif %}
{% endblock %}
